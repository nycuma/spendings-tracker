(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,n){},256:function(e,t,n){e.exports=n(833)},45:function(e,t,n){},641:function(e,t,n){},652:function(e,t,n){},654:function(e,t,n){},830:function(e,t,n){},831:function(e,t,n){},833:function(e,t,n){"use strict";n.r(t);var a=n(1),l=n.n(a),r=n(85),o=n(41),i=n(12),c=(n(222),n(836)),s=n(32),u=n(20),d=n(35),m=n.n(d),p=Object(o.c)({spendings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SPENDING":return[].concat(Object(s.a)(e),[{id:t.id?t.id:m()(),day:t.day,cat:t.cat,amount:t.amount,comment:t.comment,dateAdded:t.dateAdded?t.dateAdded:new Date}]);case"ADD_SPENDINGS":return[].concat(Object(s.a)(e),Object(s.a)(t.spendings));default:return e}}}),h=n(9),f=n(10),g=n(13),y=n(11),E=n(14),v=n(838),b=n(837),S=n(54),D=n(129),O=n.n(D),C=n(51),k=n.n(C),T=n(15),N={food:{share:.25,items:[{comment:"Groceries",min:3,max:100},{comment:"Drinks",min:2,max:30},{comment:"D\xf6ner",min:2.5,max:5}]},coffeeshop:{share:.2,items:[{comment:"Coffee",min:1,max:2.5},{comment:"Coffee & cake",min:4,max:8},{comment:"Capuccino",min:2.5,max:3.5},{comment:"Drink at bar",min:3,max:10}]},household:{share:.2,items:[{comment:"Bicycle repair",min:50,max:100},{comment:"Vacuum cleaner bags",min:5,max:20},{comment:"Detergents",min:1,max:10},{comment:"Bed linen",min:10,max:50},{comment:"Cosmetics",min:.5,max:10},{comment:"Toothbrush",min:1,max:3},{comment:"Bank fees",min:1,max:5}]},culture:{share:.1,items:[{comment:"Book",min:2,max:25},{comment:"Cinema",min:5,max:9},{comment:"Theater",min:8,max:40},{comment:"Library membership",min:10,max:15}]},clothes:{share:.05,items:[{comment:"Present",min:5,max:50},{comment:"Donation",min:5,max:50}]},transport:{share:.15,items:[{comment:"Public transport ticket",min:1.3,max:5.4},{comment:"Train ticket",min:5,max:70},{comment:"Flight",min:30,max:100},{comment:"Petrol",min:10,max:50}]},gifts:{share:.05,items:[{comment:"Present",min:5,max:50},{comment:"Donation",min:5,max:50}]}},A={filterSpendingsByDay:function(e,t){return e&&t?e.filter(function(e){return Object(T.isSameDay)(new Date(e.day),t)}):[]},filterSpendingsByWeek:function(e,t){return e&&t?e.filter(function(e){return Object(T.isSameWeek)(new Date(e.day),t)}):[]},filterSpendingsByMonth:function(e,t){return e&&t?e.filter(function(e){return Object(T.isSameMonth)(new Date(e.day),t)}):[]},filterSpendingsByYear:function(e,t){return e&&t?e.filter(function(e){return Object(T.isSameYear)(new Date(e.day),t)}):[]},filterSpendingsByCategory:function(e,t){return e&&0!==e.length?e.filter(function(e){return e.cat===t}):[]},calculateTotalAmountByCategory:function(e,t){return e&&0!==e.length?e.filter(function(e){return e.cat===t}).map(function(e){return e.amount}).reduce(function(e,t){return e+t},0):0},calculateTotalAmountsByCategories:function(e,t){var n=this;return t&&e?t.map(function(t){var a=n.calculateTotalAmountByCategory(e,t.value);return{cat:t.value,amount:Math.round(a)}}):[]},calculateSumOfSpendings:function(e){return e&&0!==e.length?e.map(function(e){return e.amount}).reduce(function(e,t){return e+t},0):0},dateInEachWeek:function(e,t){for(var n=[],a=Object(T.endOfWeek)(t);Object(T.isBefore)(e,a);)n.push(e),e=Object(T.addWeeks)(e,1);return n},dateInEachMonth:function(e,t){for(var n=[],a=Object(T.endOfMonth)(t);Object(T.isBefore)(e,a);)n.push(e),e=k()(e,1);return n},dateInEachYear:function(e,t){for(var n=[],a=Object(T.endOfYear)(t);Object(T.isBefore)(e,a);)n.push(e),e=Object(T.addYears)(e,1);return n},generateRandomData:function(e,t,n){for(var a=[],l=0;l<e;l++)for(var r=Math.random(),o=Object.keys(N),i=0,c=0;c<o.length;c++)if(r<(i+=N[o[c]].share)){a.push(this.createRandomSpending(o[c],t,n));break}return a},getRandomDate:function(e,t){return new Date(+e+Math.random()*(t-e))},getRandomIndex:function(e){return Math.floor(Math.random()*e)},getRandomAmount:function(e,t){return Math.random()*(t-e)+e},createRandomSpending:function(e,t,n){var a=this.getRandomIndex(N[e].items.length),l=N[e].items[a];return{id:m()(),day:this.getRandomDate(t,n),cat:e,amount:this.getRandomAmount(N[e].items[a].min,N[e].items[a].max),comment:l.comment,dateAdded:new Date}}};var j=Object(i.b)(null,function(e){return{addSpendings:function(t){return e(function(e){return{type:"ADD_SPENDINGS",spendings:e}}(t))}}})(function(e){var t=new Date,n=O()(t,3),a=A.generateRandomData(150,n,t);return l.a.createElement("header",null,l.a.createElement("div",{className:"wrapper-generate-btn"},l.a.createElement("button",{id:"generate-btn",onClick:function(){return e.addSpendings(a)}},"Generate random data")),l.a.createElement(S.Box,{className:"nav-icon nav-icon"}))}),w=n(27),x=n(223),M=n.n(x),F={LOCALE_DECIMAL_OPTIONS:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2},DATE_FORMAT:"DD MMM YYYY",DATE_FORMAT_SHORT:"DD.MM.YYYY",DATE_FORMAT_INPUT:"YYYY-MM-DD",FIRST_DAY_WEEK:1,TIME_UNITS:["day","week","month","year"],CURRENCIES:[{name:"Euro",code:"EUR",symbol:"\u20ac"},{name:"US Dollar",code:"USD",symbol:"$"},{name:"British Pound",code:"GBP",symbol:"\xa3"}],LOCALES:["de-DE","en-US","en-UK"],DEFAULT_CURRENCY_OPTIONS:{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2},DEFAULT_LOCALE:"de-DE",DEFAULT_CURRENCY:"EUR",DEFAULT_CATEGORIES:[{label:"Food",value:"food",descr:"",color:"#7E6258"},{label:"Coffee Shops, Bars & Restaurants",value:"coffeeshop",descr:"",color:"#3EAC9A"},{label:"Household",value:"household",descr:"",color:"#AC633E"},{label:"Culture",value:"culture",descr:"",color:"#58747E"},{label:"Clothes",value:"clothes",descr:"",color:"#3EAC63"},{label:"Transport",value:"transport",descr:"",color:"#7E7558"},{label:"Gifts & Donations",value:"gifts",descr:"",color:"#AC9A3E"}]},R=(n(641),n(17)),L=n.n(R),I="spendings";var U=function(){if(!L.a.get("recurrentSpending"))return[]},_=l.a.createContext(),P=_.Provider,W=_.Consumer,Y=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).updateCurrency=function(e){n.setState({currency:e.target.value})},n.updateLocale=function(e){n.setState({locale:e.target.value})},n.addCategory=function(e){n.setState({categories:[].concat(Object(s.a)(n.state.categories),[e])})},n.removeCategory=function(e){n.setState({categories:n.state.categories.filter(function(t){return t.value!==e})})},n.state={currency:F.DEFAULT_CURRENCY,locale:F.DEFAULT_LOCALE,categories:F.DEFAULT_CATEGORIES},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({currency:L.a.get("currency")||F.DEFAULT_CURRENCY,locale:L.a.get("locale")||F.DEFAULT_LOCALE,categories:L.a.get("categories")||F.DEFAULT_CATEGORIES})}},{key:"componentWillUnmount",value:function(){var e,t,n;e=this.state.currency,L.a.set("currency",e),t=this.state.locale,L.a.set("locale",t),n=this.state.categories,L.a.set("categories",n)}},{key:"render",value:function(){return l.a.createElement(P,{value:Object(u.a)({},this.state,{updateCurrency:this.updateCurrency,updateLocale:this.updateLocale,addCategory:this.addCategory,removeCategory:this.removeCategory})},this.props.children)}}]),t}(l.a.Component);var B=function(e){return l.a.createElement(W,null,function(t){var n=t.currency,a=t.locale;return l.a.createElement("div",{className:"hover-total-amount-day",style:e.style},e.amount.toLocaleString(a,Object(u.a)({},F.DEFAULT_CURRENCY_OPTIONS,{currency:n})))})},V=(n(652),n(653),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={daysWithSpendings:n.getDaysWithSpendings()},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){e.spendings.length!==this.props.spendings.length&&this.updateDaysWithSpendings()}},{key:"displayAmountSpent",value:function(e,t,n){e=e.getDate();var a=this.state.daysWithSpendings[e];a&&(a.style={top:n.pageY,left:n.pageX-50},this.setState({daysWithSpendings:Object(u.a)({},this.state.daysWithSpendings,Object(w.a)({},e,a))}))}},{key:"hideAmountSpent",value:function(e){e=e.getDate();var t=this.state.daysWithSpendings[e];t&&(t.style={display:"none"},this.setState({daysWithSpendings:Object(u.a)({},this.state.daysWithSpendings,Object(w.a)({},e,t))}))}},{key:"getDaysWithSpendings",value:function(e){e=e||this.props.selectedDay;var t=A.filterSpendingsByMonth(this.props.spendings,e),n={};return t.forEach(function(e){var t=new Date(e.day).getDate();n[t]?n[t].amount+=e.amount:n[t]={date:new Date(e.day),amount:e.amount,style:{display:"none"}}}),n}},{key:"updateDaysWithSpendings",value:function(e){this.setState({daysWithSpendings:this.getDaysWithSpendings(e)})}},{key:"render",value:function(){var e=this,t={weekend:{daysOfWeek:[6,0]},today:new Date,selectedDay:this.props.selectedDay,dayWithSpending:Object.values(this.state.daysWithSpendings).map(function(e){return e.date})},n=Object.keys(this.state.daysWithSpendings).map(function(t){return l.a.createElement(B,{key:t,amount:e.state.daysWithSpendings[t].amount,style:e.state.daysWithSpendings[t].style})});return l.a.createElement("div",{id:"calender",className:"box"},l.a.createElement(M.a,{todayButton:"Today",firstDayOfWeek:F.FIRST_DAY_WEEK,modifiers:t,modifiersStyles:{today:{color:"#58747E"},weekend:{color:"#7E6258"},selectedDay:{color:"white",backgroundColor:"#7E6258"},dayWithSpending:{fontWeight:"bold"}},onDayClick:this.props.updateSelectedDay,onDayMouseEnter:function(t,n,a){return e.displayAmountSpent(t,n,a)},onDayMouseLeave:function(t,n,a){return e.hideAmountSpent(t,n,a)},onMonthChange:function(t){return e.updateDaysWithSpendings(t)}}),l.a.createElement("div",null,n),l.a.createElement("div",{className:"box add-actions"},l.a.createElement("span",{className:"add-action",onClick:this.props.openAddModal},l.a.createElement("button",{className:"add-pos-btn"},"+"),"Add spending"),l.a.createElement("span",{className:"add-action",onClick:this.props.openImportModal},l.a.createElement("button",{className:"add-pos-btn"},"+"),"Import from JSON")))}}]),t}(l.a.Component)),G=Object(i.b)(function(e){return{spendings:e.spendings}})(V),H=n(19),K=n.n(H),J=(n(654),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).nodeRef=l.a.createRef(),n.state={valDay:n.initDay(),valCategory:"food",valAmount:"",valComment:"",showParsingError:!1},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",function(t){return e.handleClickOutideForm(t)})}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("click",function(t){return e.handleClickOutideForm(t)})}},{key:"handleClickOutideForm",value:function(e){this.nodeRef.current&&!this.nodeRef.current.contains(e.target)&&this.props.onClose()}},{key:"initDay",value:function(){return this.props.selectedDay?K()(this.props.selectedDay,F.DATE_FORMAT_INPUT):null}},{key:"handleDay",value:function(e){this.setState({valDay:e.target.value})}},{key:"handleCategory",value:function(e){this.setState({valCategory:e.target.value})}},{key:"handleAmount",value:function(e){this.setState({valAmount:e.target.value.replace(",",".")})}},{key:"handleComment",value:function(e){this.setState({valComment:e.target.value})}},{key:"handleFormInput",value:function(e){e.preventDefault();var t=parseFloat(this.state.valAmount);isNaN(t)?this.setState({showParsingError:!0}):(this.setState({showParsingError:!1}),this.props.addSpendingsPosition(this.state.valCategory,t,this.state.valComment,this.state.valDay)),this.setState({valComment:"",valAmount:""})}},{key:"handleFormInputAndClose",value:function(e){this.handleFormInput(e),this.props.onClose()}},{key:"render",value:function(){var e=this,t=this.props.categories.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}),n={display:this.state.showParsingError?"inline":"none"};return l.a.createElement("div",{id:"add-modal",ref:this.nodeRef},l.a.createElement("div",{id:"tooltip-error",style:n},"Please enter a correct value"),l.a.createElement("button",{className:"close-X",onClick:this.props.onClose},"x"),l.a.createElement("form",{id:"add-form"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Date: "),l.a.createElement("td",null,l.a.createElement("input",{type:"date",value:this.state.valDay,onChange:function(t){return e.handleDay(t)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Category: "),l.a.createElement("td",null,l.a.createElement("select",{value:this.valCategory,onChange:function(t){return e.handleCategory(t)}},t))),l.a.createElement("tr",null,l.a.createElement("td",null,"Amount spent: "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",style:this.state.showParsingError?{border:"solid 1px red",backgroundColor:"#ffe6e6"}:{},value:this.state.valAmount.toLocaleString(this.props.locale,F.LOCALE_DECIMAL_OPTIONS),onChange:function(t){return e.handleAmount(t)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Comment: "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",maxLength:"150",value:this.state.valComment,onChange:function(t){return e.handleComment(t)}}))),l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("input",{type:"submit",onClick:function(t){return e.handleFormInput(t)},value:"Submit + Add next"}),l.a.createElement("input",{type:"submit",onClick:function(t){return e.handleFormInputAndClose(t)},value:"Submit + Close"})))))))}}]),t}(l.a.Component)),X=(n(45),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={catExpandedView:n.initStateObject()},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.spendingsForDay!==this.props.spendingsForDay&&this.setState({catExpandedView:this.initStateObject()})}},{key:"initStateObject",value:function(){var e=this,t={};return this.props.categories.forEach(function(n){t[n.value]=!!e.props.onlyToday}),t}},{key:"toggleDisplayAllPositionsForCat",value:function(e){var t=this.state.catExpandedView;t[e]=!this.state.catExpandedView[e],this.setState({catExpandedView:t})}},{key:"renderTableBody",value:function(e){var t=this;return this.props.categories.map(function(n){var a=A.calculateTotalAmountByCategory(e,n.value),r=a>0?t.state.catExpandedView[n.value]?"arrow-up":"arrow-down":"";return l.a.createElement("tbody",{key:n.value},l.a.createElement("tr",null,l.a.createElement("td",null,n.label),l.a.createElement("td",{className:"cell-amount"},a.toLocaleString(t.props.locale,t.props.currencyOptions)),l.a.createElement("td",{className:"arrow"},l.a.createElement("span",{className:r,onClick:function(){return t.toggleDisplayAllPositionsForCat(n.value)}}))),t.renderSpendingsPositons(e,n.value))})}},{key:"renderSpendingsPositons",value:function(e,t){var n=this,a=A.filterSpendingsByCategory(e,t),r=this.state.catExpandedView[t]?"":"none";if(a)return a.map(function(e,a){return l.a.createElement("tr",{key:t+a,style:{display:r},className:"font-small-colored"},l.a.createElement("td",null,e.comment),l.a.createElement("td",{className:"cell-amount"},e.amount.toLocaleString(n.props.locale,n.props.currencyOptions)))})}},{key:"render",value:function(){var e=this,t=this.props.fadeout?"tile fade-out":"tile",n=this.props.onlyToday?new Date:this.props.selectedDay,a=A.filterSpendingsByDay(this.props.spendings,n),r=A.calculateSumOfSpendings(a),o=this.props.onlyToday?"Today's Spendings":"Spendings on "+K()(this.props.selectedDay,F.DATE_FORMAT);return l.a.createElement("div",{className:t},l.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.props.toggleDisplay("spendingsSingleDay")}},"x"),l.a.createElement("h4",null,o),l.a.createElement("table",{className:"table-spendings"},this.renderTableBody(a),l.a.createElement("tfoot",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("b",null,"Total")),l.a.createElement("td",{className:"cell-amount"},l.a.createElement("b",null,r.toLocaleString(this.props.locale,this.props.currencyOptions)))))))}}]),t}(l.a.Component)),$=Object(i.b)(function(e){return{spendings:e.spendings}})(X);var q=Object(i.b)(function(e){return{spendings:e.spendings}})(function(e){var t=e.fadeout?"tile fade-out":"tile",n=new Date,a=A.calculateSumOfSpendings(A.filterSpendingsByDay(e.spendings,n)),r=A.calculateSumOfSpendings(A.filterSpendingsByWeek(e.spendings,n)),o=A.calculateSumOfSpendings(A.filterSpendingsByMonth(e.spendings,n)),i=A.calculateSumOfSpendings(A.filterSpendingsByYear(e.spendings,n));return l.a.createElement("div",{className:t},l.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.toggleDisplay("totalSpendings")}},"x"),l.a.createElement("h4",null,"Total Spendings"),l.a.createElement("table",{className:"table-spendings"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Today:"),l.a.createElement("td",{className:"cell-amount"},a.toLocaleString(e.locale,e.currencyOptions))),l.a.createElement("tr",null,l.a.createElement("td",null,"This week:"),l.a.createElement("td",{className:"cell-amount"},r.toLocaleString(e.locale,e.currencyOptions))),l.a.createElement("tr",null,l.a.createElement("td",null,"This month:"),l.a.createElement("td",{className:"cell-amount"},o.toLocaleString(e.locale,e.currencyOptions))),l.a.createElement("tr",null,l.a.createElement("td",null,"This year:"),l.a.createElement("td",{className:"cell-amount"},i.toLocaleString(e.locale,e.currencyOptions))))))}),z=n(25);var Q=Object(i.b)(function(e){return{spendings:e.spendings}})(function(e){var t,n=A.calculateTotalAmountsByCategories(e.spendings,e.categories),a=[];n&&0!==n.length?t=e.categories.map(function(e,t){return a.push(e.color),{name:e.label.length<=20?e.label:e.label.substring(0,18)+"...",value:n[t].amount}}):(a.push("#f1f4f4"),t=[{name:"No data available",value:1}]);var r=e.fadeout?"tile fade-out":"tile";return l.a.createElement("div",{className:r},l.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.toggleDisplay("catPieChart")}},"x"),l.a.createElement("h4",null,"Spendings on Categories"),l.a.createElement("div",{id:"piechart"},l.a.createElement(z.g,{width:400,height:150},l.a.createElement(z.f,{cx:100,cy:70,isAnimationActive:!0,data:t,outerRadius:65,fill:"#58747E",labelLine:!1,label:!1,dataKey:"value",nameKey:"name"},t.map(function(e,t){return l.a.createElement(z.d,{fill:a[t],key:t})})),l.a.createElement(z.e,{layout:"vertical",align:"right",verticalAlign:"top",width:190,iconType:"square",iconSize:12}))))});var Z=Object(i.b)(function(e){return{spendings:e.spendings}})(function(e){var t=e.spendings.slice(-15).reverse().map(function(t,n){return l.a.createElement("tr",{key:n},l.a.createElement("td",{className:"align-left"},K()(t.day,F.DATE_FORMAT_SHORT)),l.a.createElement("td",null,t.comment.length<28?t.comment:t.comment.substring(0,25)+"..."),l.a.createElement("td",{className:"font-small-colored align-right"},t.amount.toLocaleString(e.locale,e.currencyOptions)))}),n=e.fadeout?"tile fade-out":"tile";return l.a.createElement("div",{className:n},l.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.toggleDisplay("recentHistory")}},"x"),l.a.createElement("h4",null,"Recently Added Spendings"),l.a.createElement("table",{className:"table-spendings-history"},l.a.createElement("tbody",null,t)))});var ee=function(e){var t=U().map(function(t,n){return l.a.createElement("tr",{key:n},l.a.createElement("td",{className:"align-left"},K()(t.startDate,F.DATE_FORMAT_SHORT)),l.a.createElement("td",null,t.interval),l.a.createElement("td",null,t.comment.length<28?t.comment:t.comment.substring(0,25)+"..."),l.a.createElement("td",{className:"font-small-colored align-right"},t.amount.toLocaleString(e.locale,e.currencyOptions)))}),n=t.length>0?l.a.createElement("tr",null,l.a.createElement("td",null," Since "),l.a.createElement("td",null," Interval "),l.a.createElement("td",null," Description "),l.a.createElement("td",null," Amount ")):l.a.createElement("tr",null,l.a.createElement("td",null,"No recurrent spendings found")),a=e.fadeout?"tile fade-out":"tile";return l.a.createElement("div",{className:a},l.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.toggleDisplay("recurrentSpendings")}},"x"),l.a.createElement("h4",null,"Recurrent Spendings"),l.a.createElement("table",{className:"table-spendings-history"},l.a.createElement("thead",null,n),l.a.createElement("tbody",null,t)))},te=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={display:{catPieChart:!0,spendingsSingleDay:!0,totalSpendings:!0,recentHistory:!0,recurrentSpendings:!0},fadeout:{catPieChart:!1,spendingsSingleDay:!1,totalSpendings:!1,recentHistory:!1,recurrentSpendings:!1}},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"toggleDisplay",value:function(e){var t=this;this.setState({fadeout:Object(u.a)({},this.state.fadeout,Object(w.a)({},e,!this.state.fadeout[e]))}),setTimeout(function(){t.setState({display:Object(u.a)({},t.state.display,Object(w.a)({},e,!t.state.display[e]))})},500)}},{key:"render",value:function(){var e=this;return l.a.createElement(W,null,function(t){var n=t.currency,a=t.locale,r=t.categories,o=Object(u.a)({},F.DEFAULT_CURRENCY_OPTIONS,{currency:n});return l.a.createElement("div",{id:"tiles",className:"box"},e.state.display.catPieChart&&l.a.createElement(Q,{toggleDisplay:function(t){return e.toggleDisplay(t)},categories:r,fadeout:e.state.fadeout.catPieChart}),e.state.display.spendingsSingleDay&&l.a.createElement($,{toggleDisplay:function(t){return e.toggleDisplay(t)},locale:a,currencyOptions:o,categories:r,fadeout:e.state.fadeout.spendingsSingleDay,onlyToday:!0}),e.state.display.totalSpendings&&l.a.createElement(q,{toggleDisplay:function(t){return e.toggleDisplay(t)},locale:a,currencyOptions:o,fadeout:e.state.fadeout.totalSpendings}),e.state.display.recentHistory&&l.a.createElement(Z,{toggleDisplay:function(t){return e.toggleDisplay(t)},locale:a,currencyOptions:o,fadeout:e.state.fadeout.recentHistory}),e.state.display.spendingsSingleDay&&l.a.createElement($,{toggleDisplay:function(t){return e.toggleDisplay(t)},locale:a,currencyOptions:o,categories:r,fadeout:e.state.fadeout.spendingsSingleDay,onlyToday:!1,selectedDay:e.props.selectedDay}),e.state.display.recurrentSpendings&&l.a.createElement(ee,{toggleDisplay:function(t){return e.toggleDisplay(t)},locale:a,currencyOptions:o,fadeout:e.state.fadeout.recurrentSpendings}))})}}]),t}(l.a.Component),ne=(n(830),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={selectedDay:new Date,addFormIsVisible:!1},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.fileSelector=this.initFileSelector()}},{key:"initFileSelector",value:function(){var e=document.createElement("input");return e.setAttribute("type","file"),e.setAttribute("multiple",!0),e.onchange=this.handleFileUpload,e}},{key:"updateSelectedDay",value:function(e){this.setState({selectedDay:e})}},{key:"addSpendingsPosition",value:function(e,t,n,a){var l=a?new Date(a):this.state.selectedDay,r={id:m()(),day:l,cat:e,amount:t,comment:n};this.props.addSpending(r)}},{key:"openAddModal",value:function(){this.setState({addFormIsVisible:!0})}},{key:"openImportModal",value:function(e){e.preventDefault(),this.fileSelector.click()}},{key:"handleFileUpload",value:function(e){var t=this;e.preventDefault();var n=e.target.files;if(n)for(var a=0;a<n.length;a++)"application/json"===n[a].type?function(){var e=new FileReader;e.onload=function(){var n=JSON.parse(e.result);n&&n.data&&n.data.forEach(function(e){t.addSpendingsPosition(e.cat,e.amount,e.comment,new Date(e.day))})},e.onerror=function(e){console.log("error while reading file: "+e)},e.readAsText(n[a])}():console.log("Error: File is not a JSON document...");else console.log("No files to upload found")}},{key:"onClose",value:function(){this.setState({addFormIsVisible:!1})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"dashboard",className:"box"},l.a.createElement(te,{selectedDay:this.state.selectedDay}),l.a.createElement(G,{selectedDay:this.state.selectedDay,updateSelectedDay:function(t){return e.updateSelectedDay(t)},openAddModal:function(){return e.openAddModal()},openImportModal:function(t){return e.openImportModal(t)}}),this.state.addFormIsVisible&&l.a.createElement(W,null,function(t){var n=t.locale,a=t.categories;return l.a.createElement(J,{selectedDay:e.state.selectedDay,addSpendingsPosition:function(t,n,a,l){return e.addSpendingsPosition(t,n,a,l)},onClose:function(){return e.onClose()},locale:n,categories:a})}))}}]),t}(l.a.Component)),ae=Object(i.b)(null,function(e){return{addSpending:function(t){return e(function(e){return Object(u.a)({type:"ADD_SPENDING"},e)}(t))}}})(ne),le=n(133),re=n.n(le),oe=n(30),ie=n.n(oe),ce=n(52),se=n.n(ce),ue=n(132),de=n.n(ue),me=n(88),pe=n.n(me),he=n(64),fe=n.n(he),ge=n(86),ye=n.n(ge),Ee=n(87),ve=n.n(Ee),be=n(131),Se=n.n(be),De=n(130),Oe=n.n(De),Ce=function(e){function t(e){var n;Object(h.a)(this,t),n=Object(g.a)(this,Object(y.a)(t).call(this,e));var a=new Date;return n.state={unit:"month",category:"all",dateFrom:K()(re()(a,1),F.DATE_FORMAT_INPUT),dateTo:K()(a,F.DATE_FORMAT_INPUT),dataTotals:[]},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.updateChart()}},{key:"handleUnit",value:function(e){this.setState({unit:e.target.value})}},{key:"handleCategory",value:function(e){this.setState({category:e.target.value})}},{key:"handleDate1",value:function(e){this.setState({dateFrom:e.target.value})}},{key:"handleDate2",value:function(e){this.setState({dateTo:e.target.value})}},{key:"updateChart",value:function(){var e,t,n,a=this,l=[];"day"===this.state.unit?(l=Oe()(this.state.dateFrom,this.state.dateTo),e=ie.a,t=fe.a,n="DD.MM."):"week"===this.state.unit?(l=A.dateInEachWeek(this.state.dateFrom,this.state.dateTo),e=se.a,t=ye.a,n="W"):"month"===this.state.unit?(l=A.dateInEachMonth(this.state.dateFrom,this.state.dateTo),e=de.a,t=ve.a,n="MMM"):"year"===this.state.unit&&(l=A.dateInEachYear(this.state.dateFrom,this.state.dateTo),e=pe.a,t=Se.a,n="YYYY");var r=l.map(function(l){var r="all"===a.state.category?void 0:a.state.category,o=function(e,t,n,a){if(!e&&!t)return[];var l=L.a.get(I);return l?(e&&(l=l.filter(function(t){return new Date(t.day)>=e})),t&&(l=l.filter(function(e){return new Date(e.day)<=t})),n&&(l=l.filter(function(e){return e.cat===n})),a?l.slice(0,a):l):[]}(e(l),t(l),r),i=A.calculateSumOfSpendings(o);return{name:K()(l,n),value:i}});this.setState({dataTotals:r})}},{key:"render",value:function(){var e=this,t=F.TIME_UNITS.map(function(e){return l.a.createElement("option",{key:e,value:e},e)});return l.a.createElement("div",{id:"analytics",className:"box"},l.a.createElement("h1",{className:"menu-item-headline"},"Analytics"),l.a.createElement("div",{className:"border-dashed scroll-x-axis"},l.a.createElement("h4",null,"Totals"),l.a.createElement("div",{className:"setup"},l.a.createElement("div",null,"Unit:\xa0",l.a.createElement("select",{value:this.state.unit,onChange:function(t){return e.handleUnit(t)}},t)),l.a.createElement("div",null,"Time span:\xa0",l.a.createElement("input",{type:"date",value:this.state.dateFrom,onChange:function(t){return e.handleDate1(t)}}),"\xa0",l.a.createElement("input",{type:"date",value:this.state.dateTo,onChange:function(t){return e.handleDate2(t)}})),l.a.createElement("div",null,"Categories:\xa0",l.a.createElement("select",{value:this.state.category,onChange:function(t){return e.handleCategory(t)}},l.a.createElement("option",{value:"all"},"All"),l.a.createElement(W,null,function(e){return e.categories.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)})}))),l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e.updateChart()}},"Update chart"))),l.a.createElement("div",{className:"chart"},l.a.createElement(z.b,{width:1e3,height:300,data:this.state.dataTotals,margin:{top:30,right:30,left:20,bottom:5}},l.a.createElement(z.c,{strokeDasharray:"3 3"}),l.a.createElement(z.h,{dataKey:"name"}),l.a.createElement(z.i,null),l.a.createElement(z.a,{dataKey:"value",fill:"#7E6258"})))),l.a.createElement("div",{className:"border-dashed"},l.a.createElement("h4",null,"Averages"),"TODO"),l.a.createElement("div",{className:"border-dashed"},l.a.createElement("h4",null,"Comparisons"),"TODO"))}}]),t}(a.Component);n(831);var ke=function(){var e=F.CURRENCIES.map(function(e){return l.a.createElement("option",{key:e.code,value:e.code},e.name," (",e.symbol,")")}),t=F.LOCALES.map(function(e){return l.a.createElement("option",{key:e,value:e},e)});return l.a.createElement("div",{id:"settings",className:"box"},l.a.createElement("h1",{className:"menu-item-headline"},"Settings"),l.a.createElement("div",{className:"border-dashed"},l.a.createElement("h4",null,"Preferences"),l.a.createElement("table",null,l.a.createElement(W,null,function(n){var a=n.currency,r=n.locale,o=n.categories,i=n.updateCurrency,c=n.updateLocale,s=(n.addCategory,n.removeCategory),u=o.map(function(e){return l.a.createElement("tr",{className:"reducedPadding",key:e.value},l.a.createElement("td",null,l.a.createElement("span",{className:"font-small-colored"},e.label)),l.a.createElement("td",null,l.a.createElement("button",{className:"btnDelete",title:"Delete",onClick:function(){return s(e.value)}},"X")))});return l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"prefTitle"},"Currency"),l.a.createElement("td",null,l.a.createElement("span",{className:"font-small-colored"},a)),l.a.createElement("td",null,"Update: ",l.a.createElement("select",{value:a,onChange:function(e){return i(e)}},e))),l.a.createElement("tr",null,l.a.createElement("td",{className:"prefTitle"},"Locale"),l.a.createElement("td",null,l.a.createElement("span",{className:"font-small-colored"},r)),l.a.createElement("td",null,"Update: ",l.a.createElement("select",{value:r,onChange:function(e){return c(e)}},t))),l.a.createElement("tr",null,l.a.createElement("td",{className:"prefTitle",rowSpan:u.length+1},"Categories")),u)}))),l.a.createElement("div",{className:"border-dashed"},l.a.createElement("h4",null,"Recurrent Spendings")))},Te=n(835),Ne=(n(127),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={displayTitleDashboard:!1,displayTitleAnalytics:!1,displayTitleSettings:!1,distanceTop:55},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",function(){return e.handleSidebarPosition()})}},{key:"handleSidebarPosition",value:function(){var e=document.documentElement.scrollTop||document.body.scrollTop;this.setState({distanceTop:Math.max(55-e,0)})}},{key:"toggleNavTitle",value:function(e){this.setState(Object(w.a)({},e,!this.state[e]))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"sidebar",style:{top:this.state.distanceTop}},l.a.createElement("ul",null,l.a.createElement("li",{onMouseEnter:function(){return e.toggleNavTitle("displayTitleDashboard")},onMouseLeave:function(){return e.toggleNavTitle("displayTitleDashboard")}},l.a.createElement(Te.a,{to:"/dashboard"},l.a.createElement(S.Home,{width:"27",height:"27",className:"nav-icon"}),l.a.createElement("span",{className:this.state.displayTitleDashboard?"":"hidden"},"Dashboard"))),l.a.createElement("li",{onMouseEnter:function(){return e.toggleNavTitle("displayTitleAnalytics")},onMouseLeave:function(){return e.toggleNavTitle("displayTitleAnalytics")}},l.a.createElement(Te.a,{to:"/analytics"},l.a.createElement(S.BarChart2,{width:"27",height:"27",className:"nav-icon"}),l.a.createElement("span",{className:this.state.displayTitleAnalytics?"":"hidden"},"Analytics"))),l.a.createElement("li",{onMouseEnter:function(){return e.toggleNavTitle("displayTitleSettings")},onMouseLeave:function(){return e.toggleNavTitle("displayTitleSettings")}},l.a.createElement(Te.a,{to:"/settings"},l.a.createElement(S.Settings,{width:"27",height:"27",className:"nav-icon"}),l.a.createElement("span",{className:this.state.displayTitleSettings?"":"hidden"},"Settings")))))}}]),t}(l.a.Component)),Ae=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.componentUnmount.bind(this))}},{key:"componentWillUnmount",value:function(){this.componentUnmount(),window.removeEventListener("beforeunload",this.componentUnmount.bind(this))}},{key:"componentUnmount",value:function(){!function(e,t){if(e&&0!==e.length){var n;if(t)n=e;else{var a=L.a.get(I)||[];n=[].concat(Object(s.a)(a),Object(s.a)(e))}L.a.set(I,n)}}(this.props.spendings,!0)}},{key:"render",value:function(){return l.a.createElement("div",{id:"main-container"},l.a.createElement(j,null),l.a.createElement("nav",{className:"box"},l.a.createElement(Ne,null)),l.a.createElement(Y,null,l.a.createElement(v.a,null,l.a.createElement(b.a,{exact:!0,path:"/",component:ae}),l.a.createElement(b.a,{path:"/dashboard",component:ae}),l.a.createElement(b.a,{path:"/analytics",component:Ce}),l.a.createElement(b.a,{path:"/settings",component:ke}))))}}]),t}(a.Component),je=Object(i.b)(function(e){return{spendings:e.spendings}})(Ae),we=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xe(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Me=Object(o.d)(p,{spendings:function(e,t,n,a){var l=L.a.get(I);return l?0===arguments.length?l:1===arguments.length?l.filter(function(t){return Object(T.isSameDay)(new Date(t.day),e)}):!0===t?l.filter(function(t){return Object(T.isSameWeek)(new Date(t.day),e,{weekStartsOn:F.FIRST_DAY_WEEK})}):!0===n?l.filter(function(t){return Object(T.isSameMonth)(new Date(t.day),e)}):!0===a?l.filter(function(t){return new Date(t.day).getFullYear()===e.getFullYear()}):l:[]}()||[]},void 0);Object(r.render)(l.a.createElement(c.a,null,l.a.createElement(i.a,{store:Me},l.a.createElement(je,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/spendings-tracker",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/spendings-tracker","/service-worker.js");we?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):xe(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):xe(e)})}}()}},[[256,1,2]]]);
//# sourceMappingURL=main.fe41624f.chunk.js.map