(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){},256:function(e,t,n){e.exports=n(841)},48:function(e,t,n){},645:function(e,t,n){},646:function(e,t,n){},648:function(e,t,n){},834:function(e,t,n){},835:function(e,t,n){},841:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(90),i=n(43),o=n(8),s=(n(222),n(44)),c=n(46),u=n(21),d=n(35),m=n.n(d),p=Object(i.c)({spendings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SPENDING":return[].concat(Object(c.a)(e),[{id:t.id?t.id:m()(),day:t.day,cat:t.cat,amount:t.amount,comment:t.comment,dateAdded:t.dateAdded?t.dateAdded:new Date}]);case"ADD_SPENDINGS":return[].concat(Object(c.a)(e),Object(c.a)(t.spendings));default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CURRENCY":return Object(u.a)({},e,{currency:t.currency});case"UPDATE_LOCALE":return Object(u.a)({},e,{locale:t.locale});default:return e}}}),h=n(13),g=n(14),f=n(16),y=n(15),E=n(17),v=n(45),b=n(57),D=n(130),S=n.n(D),O=n(55),C=n.n(O),k=n(10),T={food:{share:.25,items:[{comment:"Groceries",min:3,max:100},{comment:"Drinks",min:2,max:30},{comment:"D\xf6ner",min:2.5,max:5}]},coffeeshop:{share:.2,items:[{comment:"Coffee",min:1,max:2.5},{comment:"Coffee & cake",min:4,max:8},{comment:"Capuccino",min:2.5,max:3.5},{comment:"Drink at bar",min:3,max:10}]},household:{share:.2,items:[{comment:"Bicycle repair",min:50,max:100},{comment:"Vacuum cleaner bags",min:5,max:20},{comment:"Detergents",min:1,max:10},{comment:"Bed linen",min:10,max:50},{comment:"Cosmetics",min:.5,max:10},{comment:"Toothbrush",min:1,max:3},{comment:"Bank fees",min:1,max:5}]},culture:{share:.1,items:[{comment:"Book",min:2,max:25},{comment:"Cinema",min:5,max:9},{comment:"Theater",min:8,max:40},{comment:"Library membership",min:10,max:15}]},clothes:{share:.05,items:[{comment:"Present",min:5,max:50},{comment:"Donation",min:5,max:50}]},transport:{share:.15,items:[{comment:"Public transport ticket",min:1.3,max:5.4},{comment:"Train ticket",min:5,max:70},{comment:"Flight",min:30,max:100},{comment:"Petrol",min:10,max:50}]},gifts:{share:.05,items:[{comment:"Present",min:5,max:50},{comment:"Donation",min:5,max:50}]}},N={filterSpendingsByDay:function(e,t){return e&&t?e.filter(function(e){return Object(k.isSameDay)(new Date(e.day),t)}):[]},filterSpendingsByWeek:function(e,t){return e&&t?e.filter(function(e){return Object(k.isSameWeek)(new Date(e.day),t)}):[]},filterSpendingsByMonth:function(e,t){return e&&t?e.filter(function(e){return Object(k.isSameMonth)(new Date(e.day),t)}):[]},filterSpendingsByYear:function(e,t){return e&&t?e.filter(function(e){return Object(k.isSameYear)(new Date(e.day),t)}):[]},filterSpendingsByCategory:function(e,t){return e&&0!==e.length?e.filter(function(e){return e.cat===t}):[]},calculateTotalAmountByCategory:function(e,t){return e&&0!==e.length?e.filter(function(e){return e.cat===t}).map(function(e){return e.amount}).reduce(function(e,t){return e+t},0):0},calculateTotalAmountsByCategories:function(e,t){var n=this;return t&&e?t.map(function(t){var a=n.calculateTotalAmountByCategory(e,t.value);return{cat:t.value,amount:Math.round(a)}}):[]},calculateSumOfSpendings:function(e){return e&&0!==e.length?e.map(function(e){return e.amount}).reduce(function(e,t){return e+t},0):0},dateInEachWeek:function(e,t){for(var n=[],a=Object(k.endOfWeek)(t);Object(k.isBefore)(e,a);)n.push(e),e=Object(k.addWeeks)(e,1);return n},dateInEachMonth:function(e,t){for(var n=[],a=Object(k.endOfMonth)(t);Object(k.isBefore)(e,a);)n.push(e),e=C()(e,1);return n},dateInEachYear:function(e,t){for(var n=[],a=Object(k.endOfYear)(t);Object(k.isBefore)(e,a);)n.push(e),e=Object(k.addYears)(e,1);return n},generateRandomData:function(e,t,n){for(var a=[],r=0;r<e;r++)for(var l=Math.random(),i=Object.keys(T),o=0,s=0;s<i.length;s++)if(l<(o+=T[i[s]].share)){a.push(this.createRandomSpending(i[s],t,n));break}return a},getRandomDate:function(e,t){return new Date(+e+Math.random()*(t-e))},getRandomIndex:function(e){return Math.floor(Math.random()*e)},getRandomAmount:function(e,t){return Math.random()*(t-e)+e},createRandomSpending:function(e,t,n){var a=this.getRandomIndex(T[e].items.length),r=T[e].items[a];return{id:m()(),day:this.getRandomDate(t,n),cat:e,amount:this.getRandomAmount(T[e].items[a].min,T[e].items[a].max),comment:r.comment,dateAdded:new Date}}};var A=Object(o.b)(null,function(e){return{addSpendings:function(t){return e(function(e){return{type:"ADD_SPENDINGS",spendings:e}}(t))}}})(function(e){var t=new Date,n=S()(t,3),a=N.generateRandomData(150,n,t);return r.a.createElement("header",null,r.a.createElement("div",{className:"wrapper-generate-btn"},r.a.createElement("button",{id:"generate-btn",onClick:function(){return e.addSpendings(a)}},"Generate random data")),r.a.createElement(b.Box,{className:"nav-icon nav-icon"}))}),j=n(29),w=n(223),x=n.n(w),M={LOCALE_DECIMAL_OPTIONS:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2},DATE_FORMAT:"DD MMM YYYY",DATE_FORMAT_SHORT:"DD.MM.YYYY",DATE_FORMAT_INPUT:"YYYY-MM-DD",FIRST_DAY_WEEK:1,TIME_UNITS:["day","week","month","year"],CURRENCIES:[{name:"Euro",code:"EUR",symbol:"\u20ac"},{name:"US Dollar",code:"USD",symbol:"$"},{name:"British Pound",code:"GBP",symbol:"\xa3"}],LOCALES:["de-DE","en-US","en-UK"],DEFAULT_CURRENCY_OPTIONS:{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2},DEFAULT_LOCALE:"de-DE",DEFAULT_CURRENCY:"EUR",DEFAULT_CATEGORIES:[{label:"Food",value:"food",descr:"",color:"#7E6258"},{label:"Coffee Shops, Bars & Restaurants",value:"coffeeshop",descr:"",color:"#3EAC9A"},{label:"Household",value:"household",descr:"",color:"#AC633E"},{label:"Culture",value:"culture",descr:"",color:"#58747E"},{label:"Clothes",value:"clothes",descr:"",color:"#3EAC63"},{label:"Transport",value:"transport",descr:"",color:"#7E7558"},{label:"Gifts & Donations",value:"gifts",descr:"",color:"#AC9A3E"}]};n(645);var R=Object(o.b)(function(e){return{currency:e.settings.currency,locale:e.settings.locale}})(function(e){return r.a.createElement("div",{className:"hover-total-amount-day",style:e.style},e.amount.toLocaleString(e.locale,Object(u.a)({},M.DEFAULT_CURRENCY_OPTIONS,{currency:e.currency})))}),F=(n(646),n(647),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(y.a)(t).call(this,e))).state={daysWithSpendings:n.getDaysWithSpendings()},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e){e.spendings.length!==this.props.spendings.length&&this.updateDaysWithSpendings()}},{key:"displayAmountSpent",value:function(e,t,n){e=e.getDate();var a=this.state.daysWithSpendings[e];a&&(a.style={top:n.pageY,left:n.pageX-50},this.setState({daysWithSpendings:Object(u.a)({},this.state.daysWithSpendings,Object(j.a)({},e,a))}))}},{key:"hideAmountSpent",value:function(e){e=e.getDate();var t=this.state.daysWithSpendings[e];t&&(t.style={display:"none"},this.setState({daysWithSpendings:Object(u.a)({},this.state.daysWithSpendings,Object(j.a)({},e,t))}))}},{key:"getDaysWithSpendings",value:function(e){e=e||this.props.selectedDay;var t=N.filterSpendingsByMonth(this.props.spendings,e),n={};return t.forEach(function(e){var t=new Date(e.day).getDate();n[t]?n[t].amount+=e.amount:n[t]={date:new Date(e.day),amount:e.amount,style:{display:"none"}}}),n}},{key:"updateDaysWithSpendings",value:function(e){this.setState({daysWithSpendings:this.getDaysWithSpendings(e)})}},{key:"render",value:function(){var e=this,t={weekend:{daysOfWeek:[6,0]},today:new Date,selectedDay:this.props.selectedDay,dayWithSpending:Object.values(this.state.daysWithSpendings).map(function(e){return e.date})},n=Object.keys(this.state.daysWithSpendings).map(function(t){return r.a.createElement(R,{key:t,amount:e.state.daysWithSpendings[t].amount,style:e.state.daysWithSpendings[t].style})});return r.a.createElement("div",{id:"calender",className:"box"},r.a.createElement(x.a,{todayButton:"Today",firstDayOfWeek:M.FIRST_DAY_WEEK,modifiers:t,modifiersStyles:{today:{color:"#58747E"},weekend:{color:"#7E6258"},selectedDay:{color:"white",backgroundColor:"#7E6258"},dayWithSpending:{fontWeight:"bold"}},onDayClick:this.props.updateSelectedDay,onDayMouseEnter:function(t,n,a){return e.displayAmountSpent(t,n,a)},onDayMouseLeave:function(t,n,a){return e.hideAmountSpent(t,n,a)},onMonthChange:function(t){return e.updateDaysWithSpendings(t)}}),r.a.createElement("div",null,n),r.a.createElement("div",{className:"box add-actions"},r.a.createElement("span",{className:"add-action",onClick:this.props.openAddModal},r.a.createElement("button",{className:"add-pos-btn"},"+"),"Add spending"),r.a.createElement("span",{className:"add-action",onClick:this.props.openImportModal},r.a.createElement("button",{className:"add-pos-btn"},"+"),"Import from JSON")))}}]),t}(r.a.Component)),L=Object(o.b)(function(e){return{spendings:e.spendings}})(F),U=n(20),I=n.n(U),P=(n(648),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(y.a)(t).call(this,e))).nodeRef=r.a.createRef(),n.state={valDay:n.initDay(),valCategory:"food",valAmount:"",valComment:"",showParsingError:!1},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",function(t){return e.handleClickOutideForm(t)})}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("click",function(t){return e.handleClickOutideForm(t)})}},{key:"handleClickOutideForm",value:function(e){this.nodeRef.current&&!this.nodeRef.current.contains(e.target)&&this.props.onClose()}},{key:"initDay",value:function(){return this.props.selectedDay?I()(this.props.selectedDay,M.DATE_FORMAT_INPUT):null}},{key:"handleDay",value:function(e){this.setState({valDay:e.target.value})}},{key:"handleCategory",value:function(e){this.setState({valCategory:e.target.value})}},{key:"handleAmount",value:function(e){this.setState({valAmount:e.target.value.replace(",",".")})}},{key:"handleComment",value:function(e){this.setState({valComment:e.target.value})}},{key:"handleFormInput",value:function(e){e.preventDefault();var t=parseFloat(this.state.valAmount);isNaN(t)?this.setState({showParsingError:!0}):(this.setState({showParsingError:!1}),this.props.addSpendingsPosition(this.state.valCategory,t,this.state.valComment,this.state.valDay)),this.setState({valComment:"",valAmount:""})}},{key:"handleFormInputAndClose",value:function(e){this.handleFormInput(e),this.props.onClose()}},{key:"render",value:function(){var e=this,t=this.props.categories.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}),n={display:this.state.showParsingError?"inline":"none"};return r.a.createElement("div",{id:"add-modal",ref:this.nodeRef},r.a.createElement("div",{id:"tooltip-error",style:n},"Please enter a correct value"),r.a.createElement("button",{className:"close-X",onClick:this.props.onClose},"x"),r.a.createElement("form",{id:"add-form"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Date: "),r.a.createElement("td",null,r.a.createElement("input",{type:"date",value:this.state.valDay,onChange:function(t){return e.handleDay(t)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Category: "),r.a.createElement("td",null,r.a.createElement("select",{value:this.valCategory,onChange:function(t){return e.handleCategory(t)}},t))),r.a.createElement("tr",null,r.a.createElement("td",null,"Amount spent: "),r.a.createElement("td",null,r.a.createElement("input",{type:"text",style:this.state.showParsingError?{border:"solid 1px red",backgroundColor:"#ffe6e6"}:{},value:this.state.valAmount.toLocaleString(this.props.locale,M.LOCALE_DECIMAL_OPTIONS),onChange:function(t){return e.handleAmount(t)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Comment: "),r.a.createElement("td",null,r.a.createElement("input",{type:"text",maxLength:"150",value:this.state.valComment,onChange:function(t){return e.handleComment(t)}}))),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("input",{type:"submit",onClick:function(t){return e.handleFormInput(t)},value:"Submit + Add next"}),r.a.createElement("input",{type:"submit",onClick:function(t){return e.handleFormInputAndClose(t)},value:"Submit + Close"})))))))}}]),t}(r.a.Component)),_=Object(o.b)(function(e){return{categories:e.settings.categories,locale:e.settings.locale}})(P),W=(n(48),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(y.a)(t).call(this,e))).state={catExpandedView:n.initStateObject()},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.spendingsForDay!==this.props.spendingsForDay&&this.setState({catExpandedView:this.initStateObject()})}},{key:"initStateObject",value:function(){var e=this,t={};return this.props.categories.forEach(function(n){t[n.value]=!!e.props.onlyToday}),t}},{key:"toggleDisplayAllPositionsForCat",value:function(e){var t=this.state.catExpandedView;t[e]=!this.state.catExpandedView[e],this.setState({catExpandedView:t})}},{key:"renderTableBody",value:function(e){var t=this;return this.props.categories.map(function(n){var a=N.calculateTotalAmountByCategory(e,n.value),l=a>0?t.state.catExpandedView[n.value]?"arrow-up":"arrow-down":"";return r.a.createElement("tbody",{key:n.value},r.a.createElement("tr",null,r.a.createElement("td",null,n.label),r.a.createElement("td",{className:"cell-amount"},a.toLocaleString(t.props.locale,t.props.currencyOptions)),r.a.createElement("td",{className:"arrow"},r.a.createElement("span",{className:l,onClick:function(){return t.toggleDisplayAllPositionsForCat(n.value)}}))),t.renderSpendingsPositons(e,n.value))})}},{key:"renderSpendingsPositons",value:function(e,t){var n=this,a=N.filterSpendingsByCategory(e,t),l=this.state.catExpandedView[t]?"":"none";if(a)return a.map(function(e,a){return r.a.createElement("tr",{key:t+a,style:{display:l},className:"font-small-colored"},r.a.createElement("td",null,e.comment),r.a.createElement("td",{className:"cell-amount"},e.amount.toLocaleString(n.props.locale,n.props.currencyOptions)))})}},{key:"render",value:function(){var e=this,t=this.props.fadeout?"tile fade-out":"tile",n=this.props.onlyToday?new Date:this.props.selectedDay,a=N.filterSpendingsByDay(this.props.spendings,n),l=N.calculateSumOfSpendings(a),i=this.props.onlyToday?"Today's Spendings":"Spendings on "+I()(this.props.selectedDay,M.DATE_FORMAT);return r.a.createElement("div",{className:t},r.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.props.toggleDisplay("spendingsSingleDay")}},"x"),r.a.createElement("h4",null,i),r.a.createElement("table",{className:"table-spendings"},this.renderTableBody(a),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Total")),r.a.createElement("td",{className:"cell-amount"},r.a.createElement("b",null,l.toLocaleString(this.props.locale,this.props.currencyOptions)))))))}}]),t}(r.a.Component)),Y=Object(o.b)(function(e){return{spendings:e.spendings,categories:e.settings.categories,locale:e.settings.locale}})(W);var B=Object(o.b)(function(e){return{spendings:e.spendings,locale:e.settings.locale}})(function(e){var t=e.fadeout?"tile fade-out":"tile",n=new Date,a=N.calculateSumOfSpendings(N.filterSpendingsByDay(e.spendings,n)),l=N.calculateSumOfSpendings(N.filterSpendingsByWeek(e.spendings,n)),i=N.calculateSumOfSpendings(N.filterSpendingsByMonth(e.spendings,n)),o=N.calculateSumOfSpendings(N.filterSpendingsByYear(e.spendings,n));return r.a.createElement("div",{className:t},r.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.toggleDisplay("totalSpendings")}},"x"),r.a.createElement("h4",null,"Total Spendings"),r.a.createElement("table",{className:"table-spendings"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Today:"),r.a.createElement("td",{className:"cell-amount"},a.toLocaleString(e.locale,e.currencyOptions))),r.a.createElement("tr",null,r.a.createElement("td",null,"This week:"),r.a.createElement("td",{className:"cell-amount"},l.toLocaleString(e.locale,e.currencyOptions))),r.a.createElement("tr",null,r.a.createElement("td",null,"This month:"),r.a.createElement("td",{className:"cell-amount"},i.toLocaleString(e.locale,e.currencyOptions))),r.a.createElement("tr",null,r.a.createElement("td",null,"This year:"),r.a.createElement("td",{className:"cell-amount"},o.toLocaleString(e.locale,e.currencyOptions))))))}),V=n(26);var G=Object(o.b)(function(e){return{spendings:e.spendings,categories:e.settings.categories}})(function(e){var t,n=N.calculateTotalAmountsByCategories(e.spendings,e.categories),a=[];n&&0!==n.length?t=e.categories.map(function(e,t){return a.push(e.color),{name:e.label.length<=20?e.label:e.label.substring(0,18)+"...",value:n[t].amount}}):(a.push("#f1f4f4"),t=[{name:"No data available",value:1}]);var l=e.fadeout?"tile fade-out":"tile";return r.a.createElement("div",{className:l},r.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.toggleDisplay("catPieChart")}},"x"),r.a.createElement("h4",null,"Spendings on Categories"),r.a.createElement("div",{id:"piechart"},r.a.createElement(V.g,{width:400,height:150},r.a.createElement(V.f,{cx:100,cy:70,isAnimationActive:!0,data:t,outerRadius:65,fill:"#58747E",labelLine:!1,label:!1,dataKey:"value",nameKey:"name"},t.map(function(e,t){return r.a.createElement(V.d,{fill:a[t],key:t})})),r.a.createElement(V.e,{layout:"vertical",align:"right",verticalAlign:"top",width:190,iconType:"square",iconSize:12}))))});var H=Object(o.b)(function(e){return{spendings:e.spendings,locale:e.settings.locale}})(function(e){var t=e.spendings.slice(-15).reverse().map(function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{className:"align-left"},I()(t.day,M.DATE_FORMAT_SHORT)),r.a.createElement("td",null,t.comment.length<28?t.comment:t.comment.substring(0,25)+"..."),r.a.createElement("td",{className:"font-small-colored align-right"},t.amount.toLocaleString(e.locale,e.currencyOptions)))}),n=e.fadeout?"tile fade-out":"tile";return r.a.createElement("div",{className:n},r.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.toggleDisplay("recentHistory")}},"x"),r.a.createElement("h4",null,"Recently Added Spendings"),r.a.createElement("table",{className:"table-spendings-history"},r.a.createElement("tbody",null,t)))}),K=n(18),J=n.n(K),X="spendings";var $=function(){if(!J.a.get("recurrentSpending"))return[]};var q=Object(o.b)(function(e){return{locale:e.settings.locale}})(function(e){var t=$().map(function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{className:"align-left"},I()(t.startDate,M.DATE_FORMAT_SHORT)),r.a.createElement("td",null,t.interval),r.a.createElement("td",null,t.comment.length<28?t.comment:t.comment.substring(0,25)+"..."),r.a.createElement("td",{className:"font-small-colored align-right"},t.amount.toLocaleString(e.locale,e.currencyOptions)))}),n=t.length>0?r.a.createElement("tr",null,r.a.createElement("td",null," Since "),r.a.createElement("td",null," Interval "),r.a.createElement("td",null," Description "),r.a.createElement("td",null," Amount ")):r.a.createElement("tr",null,r.a.createElement("td",null,"No recurrent spendings found")),a=e.fadeout?"tile fade-out":"tile";return r.a.createElement("div",{className:a},r.a.createElement("button",{className:"close-tile",title:"Close",onClick:function(){return e.toggleDisplay("recurrentSpendings")}},"x"),r.a.createElement("h4",null,"Recurrent Spendings"),r.a.createElement("table",{className:"table-spendings-history"},r.a.createElement("thead",null,n),r.a.createElement("tbody",null,t)))}),z=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(y.a)(t).call(this,e))).state={display:{catPieChart:!0,spendingsSingleDay:!0,totalSpendings:!0,recentHistory:!0,recurrentSpendings:!0},fadeout:{catPieChart:!1,spendingsSingleDay:!1,totalSpendings:!1,recentHistory:!1,recurrentSpendings:!1}},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"toggleDisplay",value:function(e){var t=this;this.setState({fadeout:Object(u.a)({},this.state.fadeout,Object(j.a)({},e,!this.state.fadeout[e]))}),setTimeout(function(){t.setState({display:Object(u.a)({},t.state.display,Object(j.a)({},e,!t.state.display[e]))})},500)}},{key:"render",value:function(){var e=this,t=Object(u.a)({},M.DEFAULT_CURRENCY_OPTIONS,{currency:this.props.currency});return r.a.createElement("div",{id:"tiles",className:"box"},this.state.display.catPieChart&&r.a.createElement(G,{toggleDisplay:function(t){return e.toggleDisplay(t)},fadeout:this.state.fadeout.catPieChart}),this.state.display.spendingsSingleDay&&r.a.createElement(Y,{toggleDisplay:function(t){return e.toggleDisplay(t)},currencyOptions:t,fadeout:this.state.fadeout.spendingsSingleDay,onlyToday:!0}),this.state.display.totalSpendings&&r.a.createElement(B,{toggleDisplay:function(t){return e.toggleDisplay(t)},currencyOptions:t,fadeout:this.state.fadeout.totalSpendings}),this.state.display.recentHistory&&r.a.createElement(H,{toggleDisplay:function(t){return e.toggleDisplay(t)},currencyOptions:t,fadeout:this.state.fadeout.recentHistory}),this.state.display.spendingsSingleDay&&r.a.createElement(Y,{toggleDisplay:function(t){return e.toggleDisplay(t)},currencyOptions:t,fadeout:this.state.fadeout.spendingsSingleDay,onlyToday:!1,selectedDay:this.props.selectedDay}),this.state.display.recurrentSpendings&&r.a.createElement(q,{toggleDisplay:function(t){return e.toggleDisplay(t)},currencyOptions:t,fadeout:this.state.fadeout.recurrentSpendings}))}}]),t}(r.a.Component),Q=Object(o.b)(function(e){return{currency:e.settings.currency}})(z),Z=(n(834),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(y.a)(t).call(this,e))).state={selectedDay:new Date,addFormIsVisible:!1},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.fileSelector=this.initFileSelector()}},{key:"initFileSelector",value:function(){var e=document.createElement("input");return e.setAttribute("type","file"),e.setAttribute("multiple",!0),e.onchange=this.handleFileUpload,e}},{key:"updateSelectedDay",value:function(e){this.setState({selectedDay:e})}},{key:"addSpendingsPosition",value:function(e,t,n,a){var r=a?new Date(a):this.state.selectedDay,l={id:m()(),day:r,cat:e,amount:t,comment:n};this.props.addSpending(l)}},{key:"openAddModal",value:function(){this.setState({addFormIsVisible:!0})}},{key:"openImportModal",value:function(e){e.preventDefault(),this.fileSelector.click()}},{key:"handleFileUpload",value:function(e){var t=this;e.preventDefault();var n=e.target.files;if(n)for(var a=0;a<n.length;a++)"application/json"===n[a].type?function(){var e=new FileReader;e.onload=function(){var n=JSON.parse(e.result);n&&n.data&&n.data.forEach(function(e){t.addSpendingsPosition(e.cat,e.amount,e.comment,new Date(e.day))})},e.onerror=function(e){console.log("error while reading file: "+e)},e.readAsText(n[a])}():console.log("Error: File is not a JSON document...");else console.log("No files to upload found")}},{key:"onClose",value:function(){this.setState({addFormIsVisible:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"dashboard",className:"box"},r.a.createElement(Q,{selectedDay:this.state.selectedDay}),r.a.createElement(L,{selectedDay:this.state.selectedDay,updateSelectedDay:function(t){return e.updateSelectedDay(t)},openAddModal:function(){return e.openAddModal()},openImportModal:function(t){return e.openImportModal(t)}}),this.state.addFormIsVisible&&r.a.createElement(_,{selectedDay:this.state.selectedDay,addSpendingsPosition:function(t,n,a,r){return e.addSpendingsPosition(t,n,a,r)},onClose:function(){return e.onClose()}}))}}]),t}(r.a.Component)),ee=Object(o.b)(null,function(e){return{addSpending:function(t){return e(function(e){return Object(u.a)({type:"ADD_SPENDING"},e)}(t))}}})(Z),te=function(e){function t(e){var n;Object(h.a)(this,t),n=Object(f.a)(this,Object(y.a)(t).call(this,e));var a=new Date;return n.state={unit:"month",category:"all",dateFrom:I()(Object(k.subYears)(a,1),M.DATE_FORMAT_INPUT),dateTo:I()(a,M.DATE_FORMAT_INPUT),dataTotals:[]},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.updateChart()}},{key:"handleUnit",value:function(e){this.setState({unit:e.target.value})}},{key:"handleCategory",value:function(e){this.setState({category:e.target.value})}},{key:"handleDate1",value:function(e){this.setState({dateFrom:e.target.value})}},{key:"handleDate2",value:function(e){this.setState({dateTo:e.target.value})}},{key:"updateChart",value:function(){var e,t,n,a=this,r=[];"day"===this.state.unit?(r=Object(k.eachDay)(this.state.dateFrom,this.state.dateTo),e=k.startOfDay,t=k.endOfDay,n="DD.MM."):"week"===this.state.unit?(r=N.dateInEachWeek(this.state.dateFrom,this.state.dateTo),e=k.startOfWeek,t=k.endOfWeek,n="W"):"month"===this.state.unit?(r=N.dateInEachMonth(this.state.dateFrom,this.state.dateTo),e=k.startOfMonth,t=k.endOfMonth,n="MMM"):"year"===this.state.unit&&(r=N.dateInEachYear(this.state.dateFrom,this.state.dateTo),e=k.startOfYear,t=k.endOfYear,n="YYYY");var l=r.map(function(r){var l="all"===a.state.category?void 0:a.state.category,i=function(e,t,n,a){if(!e&&!t)return[];var r=J.a.get(X);return r?(e&&(r=r.filter(function(t){return new Date(t.day)>=e})),t&&(r=r.filter(function(e){return new Date(e.day)<=t})),n&&(r=r.filter(function(e){return e.cat===n})),a?r.slice(0,a):r):[]}(e(r),t(r),l),o=N.calculateSumOfSpendings(i);return{name:I()(r,n),value:o}});this.setState({dataTotals:l})}},{key:"render",value:function(){var e=this,t=this.props.categories.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}),n=M.TIME_UNITS.map(function(e){return r.a.createElement("option",{key:e,value:e},e)});return r.a.createElement("div",{id:"analytics",className:"box"},r.a.createElement("h1",{className:"menu-item-headline"},"Analytics"),r.a.createElement("div",{className:"border-dashed scroll-x-axis"},r.a.createElement("h4",null,"Totals"),r.a.createElement("div",{className:"setup"},r.a.createElement("div",null,"Unit:\xa0",r.a.createElement("select",{value:this.state.unit,onChange:function(t){return e.handleUnit(t)}},n)),r.a.createElement("div",null,"Time span:\xa0",r.a.createElement("input",{type:"date",value:this.state.dateFrom,onChange:function(t){return e.handleDate1(t)}}),"\xa0",r.a.createElement("input",{type:"date",value:this.state.dateTo,onChange:function(t){return e.handleDate2(t)}})),r.a.createElement("div",null,"Categories:\xa0",r.a.createElement("select",{value:this.state.category,onChange:function(t){return e.handleCategory(t)}},r.a.createElement("option",{value:"all"},"All"),t)),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.updateChart()}},"Update chart"))),r.a.createElement("div",{className:"chart"},r.a.createElement(V.b,{width:1e3,height:300,data:this.state.dataTotals,margin:{top:30,right:30,left:20,bottom:5}},r.a.createElement(V.c,{strokeDasharray:"3 3"}),r.a.createElement(V.h,{dataKey:"name"}),r.a.createElement(V.i,null),r.a.createElement(V.a,{dataKey:"value",fill:"#7E6258"})))),r.a.createElement("div",{className:"border-dashed"},r.a.createElement("h4",null,"Averages"),"TODO"),r.a.createElement("div",{className:"border-dashed"},r.a.createElement("h4",null,"Comparisons"),"TODO"))}}]),t}(a.Component),ne=Object(o.b)(function(e){return{categories:e.settings.categories}})(te);n(835);var ae=Object(o.b)(function(e){return{currency:e.settings.currency,locale:e.settings.locale,categories:e.settings.categories}},function(e){return{updateCurrency:function(t){return e({type:"UPDATE_CURRENCY",currency:t.target.value})},updateLocale:function(t){return e({type:"UPDATE_LOCALE",locale:t.target.value})}}})(function(e){var t=M.CURRENCIES.map(function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name," (",e.symbol,")")}),n=M.LOCALES.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}),a=e.categories.map(function(e){return r.a.createElement("tr",{className:"reducedPadding",key:e.value},r.a.createElement("td",null,r.a.createElement("span",{className:"font-small-colored"},e.label)),r.a.createElement("td",null,r.a.createElement("button",{className:"btnDelete",title:"Delete"},"X")))});return r.a.createElement("div",{id:"settings",className:"box"},r.a.createElement("h1",{className:"menu-item-headline"},"Settings"),r.a.createElement("div",{className:"border-dashed"},r.a.createElement("h4",null,"Preferences"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"prefTitle"},"Currency"),r.a.createElement("td",null,r.a.createElement("span",{className:"font-small-colored"},e.currency)),r.a.createElement("td",null,"Update: ",r.a.createElement("select",{value:e.currency,onChange:function(t){return e.updateCurrency(t)}},t))),r.a.createElement("tr",null,r.a.createElement("td",{className:"prefTitle"},"Locale"),r.a.createElement("td",null,r.a.createElement("span",{className:"font-small-colored"},e.locale)),r.a.createElement("td",null,"Update: ",r.a.createElement("select",{value:e.locale,onChange:function(t){return e.updateLocale(t)}},n))),r.a.createElement("tr",null,r.a.createElement("td",{className:"prefTitle",rowSpan:a.length+1},"Categories")),a))),r.a.createElement("div",{className:"border-dashed"},r.a.createElement("h4",null,"Recurrent Spendings")))}),re=(n(129),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(y.a)(t).call(this,e))).state={displayTitleDashboard:!1,displayTitleAnalytics:!1,displayTitleSettings:!1,distanceTop:55},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",function(){return e.handleSidebarPosition()})}},{key:"handleSidebarPosition",value:function(){var e=document.documentElement.scrollTop||document.body.scrollTop;this.setState({distanceTop:Math.max(55-e,0)})}},{key:"toggleNavTitle",value:function(e){this.setState(Object(j.a)({},e,!this.state[e]))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"sidebar",style:{top:this.state.distanceTop}},r.a.createElement("ul",null,r.a.createElement("li",{onMouseEnter:function(){return e.toggleNavTitle("displayTitleDashboard")},onMouseLeave:function(){return e.toggleNavTitle("displayTitleDashboard")}},r.a.createElement(s.b,{to:"/dashboard"},r.a.createElement(b.Home,{width:"27",height:"27",className:"nav-icon"}),r.a.createElement("span",{className:this.state.displayTitleDashboard?"":"hidden"},"Dashboard"))),r.a.createElement("li",{onMouseEnter:function(){return e.toggleNavTitle("displayTitleAnalytics")},onMouseLeave:function(){return e.toggleNavTitle("displayTitleAnalytics")}},r.a.createElement(s.b,{to:"/analytics"},r.a.createElement(b.BarChart2,{width:"27",height:"27",className:"nav-icon"}),r.a.createElement("span",{className:this.state.displayTitleAnalytics?"":"hidden"},"Analytics"))),r.a.createElement("li",{onMouseEnter:function(){return e.toggleNavTitle("displayTitleSettings")},onMouseLeave:function(){return e.toggleNavTitle("displayTitleSettings")}},r.a.createElement(s.b,{to:"/settings"},r.a.createElement(b.Settings,{width:"27",height:"27",className:"nav-icon"}),r.a.createElement("span",{className:this.state.displayTitleSettings?"":"hidden"},"Settings")))))}}]),t}(r.a.Component)),le=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.componentUnmount.bind(this))}},{key:"componentWillUnmount",value:function(){this.componentUnmount(),window.removeEventListener("beforeunload",this.componentUnmount.bind(this))}},{key:"componentUnmount",value:function(){var e,t,n;!function(e,t){if(e&&0!==e.length){var n;if(t)n=e;else{var a=J.a.get(X)||[];n=[].concat(Object(c.a)(a),Object(c.a)(e))}J.a.set(X,n)}}(this.props.spendings,!0),e=this.props.currency,J.a.set("currency",e),t=this.props.locale,J.a.set("locale",t),n=this.props.categories,J.a.set("categories",n)}},{key:"render",value:function(){return r.a.createElement("div",{id:"main-container"},r.a.createElement(A,null),r.a.createElement("nav",{className:"box"},r.a.createElement(re,null)),r.a.createElement(v.c,null,r.a.createElement(v.a,{exact:!0,path:"/",component:ee}),r.a.createElement(v.a,{path:"/dashboard",component:ee}),r.a.createElement(v.a,{path:"/analytics",component:ne}),r.a.createElement(v.a,{path:"/settings",component:ae})))}}]),t}(a.Component),ie=Object(o.b)(function(e){return{spendings:e.spendings,currency:e.settings.currency,locale:e.settings.locale,categories:e.settings.categories}})(le),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ce={spendings:function(e,t,n,a){var r=J.a.get(X);return r?0===arguments.length?r:1===arguments.length?r.filter(function(t){return Object(k.isSameDay)(new Date(t.day),e)}):!0===t?r.filter(function(t){return Object(k.isSameWeek)(new Date(t.day),e,{weekStartsOn:M.FIRST_DAY_WEEK})}):!0===n?r.filter(function(t){return Object(k.isSameMonth)(new Date(t.day),e)}):!0===a?r.filter(function(t){return new Date(t.day).getFullYear()===e.getFullYear()}):r:[]}()||[],settings:{currency:J.a.get("currency")||M.DEFAULT_CURRENCY,locale:J.a.get("locale")||M.DEFAULT_LOCALE,categories:J.a.get("categories")||M.DEFAULT_CATEGORIES}},ue=Object(i.d)(p,ce,void 0);Object(l.render)(r.a.createElement(s.a,null,r.a.createElement(o.a,{store:ue},r.a.createElement(ie,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/spendings-tracker",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/spendings-tracker","/service-worker.js");oe?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):se(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):se(e)})}}()}},[[256,1,2]]]);
//# sourceMappingURL=main.fa9cd091.chunk.js.map